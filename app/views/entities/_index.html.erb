<script type="text/javascript">
  var canSelectEntity = true;
  var tagEntity = "";
  function sendTagEntity()
  {
    $("#hide_entity_tag").val(escape($("#entity_tag").val()));
  }
  function showEntityIndexForm()
  {
    canSelectEntity = true;
    $("#entity_actions").html("<%= escape_javascript(render :partial => 'entities/form_index') %>");
    $("#entity_tag").attr("disabled","disabled");
    $("#entity_list").trigger("reloadGrid");
    $("#entity_tag").val("");
  }
  function onCancelEntity()
  {
    location.hash = "#entities";
    if(crossPage.length) showEntityIndexForm();
  }
  function onResetEntity()
  {
    $("#entity_tag").val(tagEntity);
    $("#save_entity").attr("disabled","disabled");
  }
  function showEntityActionForm(tag)
  {
    tagEntity = tag;
    $("#entity_tag").val(tagEntity);
    $("#entity_tag").removeAttr("disabled");
    $("#entity_list").resetSelection();
    canSelectEntity = false;
  }
</script>

<%= raw(entities_jqgrid) %>

<table id="entity_list"></table>
<div id="entity_pager"></div>

<table>
  <tr id="entity_actions" align="right">
    <%= render 'entities/form_index' %>
  </tr>
  <tr align="left">
    <td colspan="2">
      tag:
      <input id="entity_tag" type="text" value="" size="83" disabled="true"
             onkeypress="$('#save_entity').removeAttr('disabled');"/>
    </td>
  </tr>
</table>
